---
toc: false
---

# Controlled components 

In React, controlled components are those where form data is handled by the React component's state. The component that renders the form elements also controls their values through state and updates them via event handlers. This allows for more predictable behavior and easier management of form data. 

Uncontrolled components, on the other hand, rely on the DOM to manage their own state. In this case, React does not control the form elements' values, and you typically access their values using refs.

Lets create a small controlled component and see how it works. 

- Create a new AddCartItem.jsx 
- Should have input fields for name, price, isAvailable (checkbox)
- Clicking on Add Product should log the values to console, pass the same to parent, and reset the form fields.
- Instead of having separate state slices, we will use a single state object to manage all form fields.


[Find the working solution in this commit](https://github.com/thecanadiandev/react-core-fundamentals/commit/ea82272689ff76473d0d1f9dbd8a433d3ad0984a)

We need to add custom code and logic for things like validation, managing focus, etc. In such cases, there are third party libraries like Formik and React Hook Form that can help manage forms more efficiently in React applications. 

Lets take a look at React-hook-form which makes managing form state and validations easier with less boilerplate code.

[React Hook Form Documentation](https://react-hook-form.com/)

We need to:

- Install react-hook-form using npm or yarn
- Refactor the AddCartItem component to use react-hook-form
- remove useState and use the useForm hook from react-hook-form
- Use register to register input fields
- Use handleSubmit for form submission
- Add basic validation rules
- Display error messages for validation failures
- On successful submission, log the form data to console, pass it to parent, and reset the form.

[Find the working solution in this commit](https://github.com/thecanadiandev/react-core-fundamentals/commit/067cd274aa638d66d7c674b75d11c4ac9b717d40)


## Why controlled components?

- **Real time validation**: Controlled components allow us to validate user input as they type, providing immediate feedback and preventing invalid data from being entered.
- **Dynamic forms**: We can easily show/hide fields, enable/disable buttons, or change styles based on the current state of the form.
- **Single source of truth**: With controlled components, the React state is the single source of truth for form data, making it easier to manage and debug.
- **Easier data manipulation**: Since form data is stored in state, we can easily manipulate it, transform it, or submit it to a server.
- **Integration with other state**: Controlled components can easily integrate with other parts of the application state, allowing for more complex interactions.
- **Consistency**: Controlled components ensure that the UI always reflects the current state, reducing the chances of discrepancies between the UI and the underlying data.

## Make components reusable 

Next step is to refactor the AddCartItem component to make it more reusable. So create an Input and Checkbox component that can be reused across different forms in the application. Each component should accept props for label, name, value, onChange, and any other necessary attributes.

[Find the working solution in this commit](https://github.com/thecanadiandev/react-core-fundamentals/commit/fd1bb59ecd42fdddef56b3daa1713e6e097e2df2)